import argparse 

from base64 import decodebytes 

import json 

""" 

Usage: 

    	python tts_decode.py --input "synthesize-text.txt" \ 

    	--output "synthesize-text-audio.mp3" 

""" 

def decode_tts_output(input_file, output_file): 

""" Decode output from Cloud Text-to-Speech. 

input_file: the response from Cloud Text-to-Speech 

output_file: the name of the audio file to create 

""" 

with open(input_file) as input: 

    	response = json.load(input) 

    	audio_data = response['audioContent'] 

    	with open(output_file, "wb") as new_file: 

        	new_file.write(decodebytes(audio_data.encode('utf-8'))) 

if __name__ == '__main__': 

parser = argparse.ArgumentParser( 

    	description="Decode output from Cloud Text-to-Speech", 

    	formatter_class=argparse.RawDescriptionHelpFormatter) 

parser.add_argument('--input', 

                   	help='The response from the Text-to-Speech API.', 

                   	required=True) 

parser.add_argument('--output', 

                   	help='The name of the audio file to create', 

                   	required=True) 

args = parser.parse_args() 

decode_tts_output(args.input, args.output) 